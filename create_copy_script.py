data = {
    "test": {
        "HD142527": {
            "10Feb17": "/content/drive/MyDrive/GAPlanetS_Database/HD142527/10Feb17/dq_cuts/Line_0pctcut_sliced_klip",
            "11Apr13": "/content/drive/MyDrive/GAPlanetS_Database/HD142527/11Apr13/dq_cuts/Line_10pctcut_sliced_klip",
            "15May15": "/content/drive/MyDrive/GAPlanetS_Database/HD142527/15May15/dq_cuts/Line_50pctcut_sliced_klip",
            "16May15": "/content/drive/MyDrive/GAPlanetS_Database/HD142527/16May15/dq_cuts/Line_80pctcut_sliced_klip",
            "27Apr18": "/content/drive/MyDrive/GAPlanetS_Database/HD142527/27Apr18/dq_cuts/Line_0pctcut_sliced_klip",
            "8Apr14_long": "/content/drive/MyDrive/GAPlanetS_Database/HD142527/8Apr14_long/dq_cuts/Line_0pctcut_sliced_klip",
        },
        "PDS70": {
            "2May18": "/content/drive/MyDrive/GAPlanetS_Database/PDS70/2May18/dq_cuts/Line_5pctcut_sliced_klip",
            "3May18": "/content/drive/MyDrive/GAPlanetS_Database/PDS70/3May18/dq_cuts/Line_30pctcut_sliced_klip",
            "8Feb17": "/content/drive/MyDrive/GAPlanetS_Database/PDS70/8Feb17/dq_cuts/Line_40pctcut_sliced_klip",
        }
    },
    "train": {
        "HD100453": {
            "17Feb17": "/content/drive/MyDrive/GAPlanetS_Database/HD100453/17Feb17/HD100453_17Feb17fakes_redo/HD100453_17Feb17_Cont_10pctcut_thetas_0_85_170_255_340_seps_8_12_16_20_24_ctrst_0.00174_0.00086_0.00054_0.00029_0.00033_FAKES_sliced_klip",
            "2May18_long": "/content/drive/MyDrive/GAPlanetS_Database/HD100453/2May18_long/HD100453_2May18_longfakes_redo/HD100453_2May18_long_Cont_30pctcut_thetas_0_85_170_255_340_425_510_seps_7_10_13_16_19_22_25_ctrst_0.00165_0.00081_0.00048_0.0003_0.00023_0.00032_0.00033_FAKES_sliced_klip",
            "2May18_short": "/content/drive/MyDrive/GAPlanetS_Database/HD100453/2May18_short/HD100453_2May18_shortfakes_redo/HD100453_2May18_short_Cont_40pctcut_thetas_0_85_170_255_340_425_510_595_seps_6_9_12_15_18_21_24_27_ctrst_0.00454_0.00137_0.00084_0.00062_0.00055_0.00079_0.00076_0.00058_FAKES_sliced_klip"
        },
        "HD100546": {
            "12Apr14": "/content/drive/Shareddrives/Follette-Lab-AWS-2/HD100546/12Apr14/HD100546_12Apr14fakes_redo/HD100546_12Apr14_Cont_10pctcut_thetas_0_85_170_seps_13_18_23_ctrst_0.00098_0.00052_0.00034_FAKES_sliced_klip",
            "30May15": "/content/drive/Shareddrives/Follette-Lab-AWS-2/HD100546/30May15/HD100546_30May15fakes_redo/HD100546_30May15_Cont_50pctcut_thetas_0_85_170_255_340_seps_8_12_16_20_24_ctrst_0.01673_0.00467_0.00263_0.00308_0.0012_FAKES_sliced_klip"
        },
        "HD141569": {
            "10Apr14": "/content/drive/Shareddrives/Follette-Lab-AWS-2/HD141569/10Apr14/HD141569_10Apr14fakes_redo/HD141569_10Apr14_Cont_50pctcut_thetas_0_135_270_seps_12_18_24_ctrst_0.00203_0.00316_0.00339_FAKES_sliced_klip",
            "11Apr14": "/content/drive/Shareddrives/Follette-Lab-AWS-2/HD141569/11Apr14/HD141569_11Apr14fakes_redo/HD141569_11Apr14_Cont_10pctcut_thetas_0_85_170_255_340_seps_8_12_16_20_24_ctrst_0.00424_0.00152_0.00057_0.00039_0.00036_FAKES_sliced_klip",
            "28May15": "/content/drive/Shareddrives/Follette-Lab-AWS-2/HD141569/28May15/HD141569_28May15fakes_redo/HD141569_28May15_Cont_70pctcut_thetas_0_85_seps_14_21_ctrst_0.02767_0.00907_FAKES_sliced_klip",
            "29May15": "/content/drive/Shareddrives/Follette-Lab-AWS-2/HD141569/29May15/HD141569_29May15fakes_redo/HD141569_29May15_Cont_0pctcut_thetas_0_85_170_255_seps_13_17_21_25_ctrst_0.00114_0.00055_0.00034_0.00035_FAKES_sliced_klip",
            "9Apr14": "/content/drive/Shareddrives/Follette-Lab-AWS-2/HD141569/9Apr14/HD141569_9Apr14fakes_redo/HD141569_9Apr14_Cont_70pctcut_thetas_0_85_170_255_seps_10_15_20_25_ctrst_0.00586_0.0022_0.00141_0.00074_FAKES_sliced_klip"
        },
        "LkCa15": {
            "16Nov14": "/content/drive/MyDrive/GAPlanetS_Database/LkCa15/16Nov14/LkCa15_16Nov14fakes_redo/LkCa15_16Nov14_Cont_60pctcut_thetas_20_235_seps_9_12_ctrst_1.0393_0.65975_FAKES_sliced_klip_1.5FWHM",
            "18Nov16": "/content/drive/MyDrive/GAPlanetS_Database/LkCa15/18Nov16/LkCa15_18Nov16fakes_redo/LkCa15_18Nov16_Cont_40pctcut_thetas_0_135_seps_12_18_ctrst_0.11054_0.04716_FAKES_sliced_klip_hp1.5fwhm"
        },
        "PDS66": {
            "7Feb17": "/content/drive/Shareddrives/Follette-Lab-AWS-2/PDS66/7Feb17/PDS66_7Feb17fakes_redo/PDS66_7Feb17_Cont_40pctcut_thetas_0_85_seps_8_11_ctrst_0.04828_0.01373_FAKES_sliced_klip"
        },
        "TWHya": {
            "7Feb17": "/content/drive/Shareddrives/Follette-Lab-AWS-2/TWHya/7Feb17/TWHya_7Feb17fakes_redo/TWHya_7Feb17_Cont_0pctcut_thetas_0_135_seps_11_18_ctrst_0.01116_0.00346_FAKES_sliced_klip",
            "8Apr14": "/content/drive/Shareddrives/Follette-Lab-AWS-2/TWHya/8Apr14/TWHya_8Apr14fakes_redo/TWHya_8Apr14_Cont_50pctcut_thetas_0_85_seps_8_11_ctrst_0.0168_0.0168_FAKES_sliced_klip"
        },
        "UXTauA": {
            "15Nov14": "/content/drive/Shareddrives/Follette-Lab-AWS-2/UXTauA/15Nov14/UXTauA_15Nov14fakes_redo/UXTauA_15Nov14_Cont_30pctcut_thetas_0_135_seps_12_18_ctrst_0.18621_0.09534_FAKES_sliced_klip"
        },
        "V12347Ori": {
            "11Dec15": "/content/drive/Shareddrives/Follette-Lab-AWS-2/V1247Ori/11Dec15/V1247Ori_11Dec15fakes_redo/V1247Ori_11Dec15_Cont_60pctcut_thetas_0_85_seps_8_11_ctrst_0.03846_0.01969_FAKES_sliced_klip",
            "15Nov14": "/content/drive/Shareddrives/Follette-Lab-AWS-2/V1247Ori/15Nov14/V1247Ori_15Nov14fakes_redo/V1247Ori_15Nov14_Cont_50pctcut_thetas_0_85_170_seps_7_9_11_ctrst_0.05166_0.01913_0.02867_FAKES_sliced_klip"
        },
        "V4046Sgr": {
            "12Apr14": "/content/drive/Shareddrives/Follette-Lab-AWS-2/V4046Sgr/12Apr14/V4046Sgr_12Apr14fakes_redo/V4046Sgr_12Apr14_Cont_50pctcut_thetas_0_85_seps_8_11_ctrst_0.00605_0.00484_FAKES_sliced_klip",
            "17May15": "/content/drive/Shareddrives/Follette-Lab-AWS-2/V4046Sgr/17May15/V4046Sgr_17May15fakes_redo/V4046Sgr_17May15_Cont_50pctcut_thetas_0_85_170_seps_7_9_11_ctrst_0.02291_0.00977_0.00626_FAKES_sliced_klip"
        },
        "CSCha": {
            "15May15": "/content/drive/Shareddrives/Follette-Lab-AWS-2/CSCha/15May15/CSCha_15May15fakes_redo/CSCha_15May15_Cont_30pctcut_thetas_0_135_seps_12_18_ctrst_0.12231_0.04912_FAKES_sliced_klip"
        },
        "SEO206462": {
            "12Apr14": "/content/drive/Shareddrives/Follette-Lab-AWS-2/SAO206462/12Apr14/SAO206462_12Apr14fakes_redo/SAO206462_12Apr14_Cont_30pctcut_thetas_0_85_170_255_340_seps_8_12_16_20_24_ctrst_0.00406_0.00113_0.00054_0.00063_0.00036_FAKES_sliced_klip",
            "26May15": "/content/drive/Shareddrives/Follette-Lab-AWS-2/SAO206462/26May15/SAO206462_26May15fakes_redo/SAO206462_26May15_Cont_30pctcut_thetas_0_85_170_seps_7_9_11_ctrst_0.05531_0.0295_0.02832_FAKES_sliced_klip"
        },
        "HD169142": {
            "18May15": "/content/drive/Shareddrives/Follette-Lab-AWS-2/HD169142/18May15/HD169142_18May15fakes_redo/HD169142_18May15_Cont_20pctcut_thetas_0_85_170_255_seps_10_15_20_25_ctrst_0.00645_0.00168_0.00103_0.00098_FAKES_sliced_klip",
            "30Aug17": "/content/drive/Shareddrives/Follette-Lab-AWS-2/HD169142/30Aug17/HD169142_30Aug17fakes_redo/HD169142_30Aug17_Cont_70pctcut_thetas_0_85_170_255_340_seps_8_12_16_20_24_ctrst_0.005_0.0024_0.00149_0.00141_0.00125_FAKES_sliced_klip",
            "8Apr14": "/content/drive/Shareddrives/Follette-Lab-AWS-2/HD169142/8Apr14/HD169142_8Apr14fakes_redo/HD169142_8Apr14_Cont_80pctcut_thetas_0_85_170_255_340_seps_8_12_16_20_24_ctrst_0.00414_0.00105_0.00064_0.00058_0.00055_FAKES_sliced_klip",
            "9Apr14": "/content/drive/Shareddrives/Follette-Lab-AWS-2/HD169142/9Apr14/HD169142_9Apr14fakes_redo/HD169142_9Apr14_Cont_50pctcut_thetas_0_85_170_seps_11_16_21_ctrst_0.00646_0.00287_0.00165_FAKES_sliced_klip"
        }
    }
}

def copy_instance(f, obj, date, data, mode, n=100):
  f.write(f'find "{data[mode][obj][date]}" | shuf --random-source=<(get_fixed_random 42) -n {n} > tmp.txt\n')
  f.write(f'rsync -azvv -e "ssh -i /content/drive/MyDrive/exo-key.pem" `cat tmp.txt` ubuntu@ec2-3-144-223-40.us-east-2.compute.amazonaws.com:/home/ubuntu/data/{mode}/{obj}/{date}/\n')

with open("copy_data.sh", "w+") as f:
  f.write(". seed.sh\n")
  for obj in data["train"]:
    for date in data["train"][obj]:
      copy_instance(f, obj, date, data, "train")
  for obj in data["test"]:
    for date in data["test"][obj]:
      copy_instance(f, obj, date, data, "test", n=150)